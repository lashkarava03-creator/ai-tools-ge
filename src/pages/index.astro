---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import AICard from '../components/AICard.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import tools from '../data/tools.json';
---

<!doctype html>
<html lang="ka">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />

    <main>
      <h1>იპოვე საჭირო AI ინსტრუმენტები</h1>
      <p>ყველა პოპულარული AI ხელსაწყო ერთ ადგილზე — მარტივად და სწრაფად.</p>

      <!-- SEARCH INPUT -->
      <input
        type="text"
        placeholder="მოძებნე AI ინსტრუმენტი..."
        oninput="filterTools(this.value)"
        style="padding:10px; width:100%; max-width:400px; border-radius:8px; border:1px solid #ddd;"
      />

      <!-- RESULTS -->
      <div
        id="tools"
        style="margin-top:32px; display:grid; gap:16px; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));"
      >
        {tools.map(tool => (
          <div
            class="tool-card"
            data-name={tool.name.toLowerCase()}
            data-desc={tool.description.toLowerCase()}
          >
            <AICard
              name={tool.name}
              description={tool.description}
              category={tool.category}
              link={tool.link}
            />
          </div>
        ))}
      </div>
    </main>

    <Footer />

    <!-- CLIENT SIDE SEARCH -->
    <script>
      function filterTools(query) {
        const q = query.toLowerCase();
        document.querySelectorAll('.tool-card').forEach(card => {
          const name = card.dataset.name;
          const desc = card.dataset.desc;
          card.style.display =
            name.includes(q) || desc.includes(q) ? 'block' : 'none';
        });
      }
    </script>
  </body>
</html>
